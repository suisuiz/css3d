(function(e){function t(t){for(var n,a,i=t[0],s=t[1],u=t[2],d=0,l=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);p&&p(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==c[s]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},c={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var p=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},2960:function(e,t,r){},"30c4":function(e,t,r){},"480f":function(e,t,r){"use strict";r("e140")},"61f0":function(e,t,r){"use strict";r("7b11")},"7b11":function(e,t,r){},"8b75":function(e,t,r){"use strict";r("30c4")},b00c:function(e,t,r){"use strict";r("2960")},c99b:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),c=(r("99af"),{id:"app",class:"AppComponent"}),o={class:"stageWrapper"},a={class:"control"},i={class:"btns"};function s(e,t,r,s,u,p){var d=Object(n["resolveComponent"])("CardStage"),l=Object(n["resolveComponent"])("PropCont");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(d,{cards:e.stageStatus.cards,selected:e.stageStatus.selected,"onUpdate:selected":t[1]||(t[1]=function(t){return e.stageStatus.selected=t}),perspective:e.stageStatus.perspective,preserve:e.stageStatus.preserve,perspectiveOrigin:"".concat(e.stageStatus.perspectiveOriginX,"% ").concat(e.stageStatus.perspectiveOriginY,"%"),offsetCenter:e.stageStatus.offsetCenter},null,8,["cards","selected","perspective","preserve","perspectiveOrigin","offsetCenter"])]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return e.reset&&e.reset.apply(e,arguments)})},"リセット"),Object(n["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.addCard&&e.addCard.apply(e,arguments)})},"カードを追加")]),Object(n["createVNode"])(l,{transforms:e.selectedCard.transforms,"onUpdate:transforms":t[4]||(t[4]=function(t){return e.selectedCard.transforms=t}),transformOriginX:e.selectedCard.originX,"onUpdate:transformOriginX":t[5]||(t[5]=function(t){return e.selectedCard.originX=t}),transformOriginY:e.selectedCard.originY,"onUpdate:transformOriginY":t[6]||(t[6]=function(t){return e.selectedCard.originY=t}),perspective:e.stageStatus.perspective,"onUpdate:perspective":t[7]||(t[7]=function(t){return e.stageStatus.perspective=t}),preserve:e.stageStatus.preserve,"onUpdate:preserve":t[8]||(t[8]=function(t){return e.stageStatus.preserve=t}),perspectiveOriginX:e.stageStatus.perspectiveOriginX,"onUpdate:perspectiveOriginX":t[9]||(t[9]=function(t){return e.stageStatus.perspectiveOriginX=t}),perspectiveOriginY:e.stageStatus.perspectiveOriginY,"onUpdate:perspectiveOriginY":t[10]||(t[10]=function(t){return e.stageStatus.perspectiveOriginY=t}),offsetCenter:e.stageStatus.offsetCenter,"onUpdate:offsetCenter":t[11]||(t[11]=function(t){return e.stageStatus.offsetCenter=t})},null,8,["transforms","transformOriginX","transformOriginY","perspective","preserve","perspectiveOriginX","perspectiveOriginY","offsetCenter"])])])}r("7db0"),r("ac1f");var u=Object(n["withScopeId"])("data-v-d1eccf8a");Object(n["pushScopeId"])("data-v-d1eccf8a");var p={class:"info"},d=Object(n["createVNode"])("div",{class:"axis axisX"},null,-1),l=Object(n["createVNode"])("div",{class:"axis axisY"},null,-1),f=Object(n["createVNode"])("div",{class:"axis axisZ"},null,-1);Object(n["popScopeId"])();var m=u((function(e,t,r,c,o,a){var i=Object(n["resolveComponent"])("FlyingCard");return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"CardStageComponent",style:e.rootStyle},[Object(n["createVNode"])("div",p,"transform: "+Object(n["toDisplayString"])(e.selectedTransform),1),Object(n["createVNode"])("div",{class:["offsetMover",{offsetCenter:e.offsetCenter}]},[d,l,f,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.cards,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:t.id,transforms:t.transforms,origin:"".concat(t.originX,"% ").concat(t.originY,"%"),isfocused:t.id===e.selected,onClick:function(r){return e.select(t)}},null,8,["transforms","origin","isfocused","onClick"])})),128))],2)],4)})),v=(r("a9e3"),r("a15b"),r("d81d"),Object(n["withScopeId"])("data-v-80edd9b8")),O=v((function(e,t,r,c,o,a){var i=Object(n["resolveComponent"])("Card");return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"FlyingCardComponent",style:e.rootStyle,onClick:t[1]||(t[1]=function(){return e.onclick&&e.onclick.apply(e,arguments)})},[Object(n["createVNode"])(i)],4)})),b=Object(n["withScopeId"])("data-v-1a0facf2");Object(n["pushScopeId"])("data-v-1a0facf2");var g={class:"CardComponent"},j=Object(n["createVNode"])("h2",{class:"title"},"Click to Select",-1),y=Object(n["createVNode"])("div",{class:"text"}," Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip... ",-1);Object(n["popScopeId"])();var V=b((function(e,t,r,c,o,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",g,[Object(n["createVNode"])("img",{src:"https://picsum.photos/seed/".concat(e.imgSeed,"/300/150")},null,8,["src"]),j,y])})),C=0,x=Object(n["defineComponent"])({setup:function(){C++;var e=C+100;return{imgSeed:e}}});r("480f");x.render=V,x.__scopeId="data-v-1a0facf2";var S=x,N={x:"translateX",y:"translateY",z:"translateZ",rx:"rotateX",ry:"rotateY",rz:"rotateZ"},h={x:"px",y:"px",z:"px",rx:"deg",ry:"deg",rz:"deg"},k=Object(n["defineComponent"])({props:{transforms:{type:Array,default:function(){return[]}},origin:{type:String,default:"center center"},isfocused:{type:Boolean,default:!1}},components:{Card:S},emits:["click","change"],setup:function(e,t){var r=Object(n["computed"])((function(){var r=e.transforms.map((function(e){return"".concat(N[e.key],"(").concat(e.value).concat(h[e.key],")")})).join(" ");return t.emit("change",r),r})),c=Object(n["computed"])((function(){return{transform:r.value,transformOrigin:e.origin,border:e.isfocused?"2px solid #000":"none"}})),o=function(){t.emit("click")};return{rootStyle:c,onclick:o}}});r("e72f");k.render=O,k.__scopeId="data-v-80edd9b8";var X=k,Y=Object(n["defineComponent"])({components:{FlyingCard:X},props:{cards:{type:Array,default:function(){return[]}},perspective:{type:Number,default:600},preserve:{type:Boolean,default:!1},perspectiveOrigin:{type:String,default:"0% 0%"},selected:{type:String,default:""},offsetCenter:{type:Boolean,default:!0}},emits:["update:selected"],setup:function(e,t){var r=Object(n["computed"])((function(){return{perspective:e.perspective+"px",transformStyle:e.preserve?"preserve-3d":"initial",perspectiveOrigin:e.perspectiveOrigin}})),c=function(e){t.emit("update:selected",e.id)},o=Object(n["computed"])((function(){var t=e.cards.find((function(t){return t.id===e.selected}));return t?t.transforms.map((function(e){return"".concat(N[e.key],"(").concat(e.value).concat(h[e.key],")")})).join(" "):""}));return{rootStyle:r,select:c,selectedTransform:o}}});r("61f0");Y.render=m,Y.__scopeId="data-v-d1eccf8a";var P=Y,w=Object(n["withScopeId"])("data-v-703505fa");Object(n["pushScopeId"])("data-v-703505fa");var B={class:"PropContComponent"},U={class:"staticListGroup"},I={class:"listGroupItem"},_={class:"itemContent"},M=Object(n["createTextVNode"])("原点を画面中央にずらす"),T=Object(n["createVNode"])("div",{class:"label"},[Object(n["createTextVNode"])(" stage style "),Object(n["createVNode"])("span",{class:"info"},"（親要素のスタイル）"),Object(n["createTextVNode"])(": ")],-1),z={class:"staticListGroup"},G={class:"listGroupItem"},E={class:"itemContent"},L={class:"listGroupItem"},A={class:"itemContent"},D=Object(n["createTextVNode"])("tansform-style: preserve-3d"),J={class:"listGroupItem"},Z={class:"itemContent"},F=Object(n["createVNode"])("div",null,"perspective-origin:",-1),q=Object(n["createVNode"])("div",{class:"label"},"transform-origin:",-1),R={key:0,class:"staticListGroup"},W={class:"listGroupItem"},H={class:"itemContent"},K=Object(n["createVNode"])("div",{class:"label"},[Object(n["createTextVNode"])("transform "),Object(n["createVNode"])("span",{class:"info"},"（下から合成）"),Object(n["createTextVNode"])(":")],-1),Q={class:"listGroupItem"},$={class:"itemContent"};Object(n["popScopeId"])();var ee=w((function(e,t,r,c,o,a){var i=Object(n["resolveComponent"])("Slider"),s=Object(n["resolveComponent"])("draggable");return Object(n["openBlock"])(),Object(n["createBlock"])("div",B,[Object(n["createVNode"])("ul",U,[Object(n["createVNode"])("li",I,[Object(n["createVNode"])("div",_,[Object(n["createVNode"])("label",null,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.stageProps.offsetCenter=t})},null,512),[[n["vModelCheckbox"],e.stageProps.offsetCenter]]),M])])])]),T,Object(n["createVNode"])("ul",z,[Object(n["createVNode"])("li",G,[Object(n["createVNode"])("div",E,[Object(n["createVNode"])(i,{label:"perspective",modelValue:e.stageProps.perspective,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.stageProps.perspective=t}),min:0,max:1e3,suffix:"px"},null,8,["modelValue"])])]),Object(n["createVNode"])("li",L,[Object(n["createVNode"])("div",A,[Object(n["createVNode"])("label",null,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.stageProps.preserve=t})},null,512),[[n["vModelCheckbox"],e.stageProps.preserve]]),D])])]),Object(n["createVNode"])("li",J,[Object(n["createVNode"])("div",Z,[F,Object(n["createVNode"])(i,{label:"X",modelValue:e.stageProps.perspectiveOriginX,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.stageProps.perspectiveOriginX=t}),min:-20,max:120,suffix:e.perspectiveOriginXSuffix},null,8,["modelValue","suffix"]),Object(n["createVNode"])(i,{label:"Y",modelValue:e.stageProps.perspectiveOriginY,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.stageProps.perspectiveOriginY=t}),min:-20,max:120,suffix:e.perspectiveOriginYSuffix},null,8,["modelValue","suffix"])])])]),q,void 0!==e.cardProps.transformOriginX?(Object(n["openBlock"])(),Object(n["createBlock"])("ul",R,[Object(n["createVNode"])("li",W,[Object(n["createVNode"])("div",H,[Object(n["createVNode"])(i,{label:"X",modelValue:e.cardProps.transformOriginX,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.cardProps.transformOriginX=t}),min:0,max:100,suffix:e.transformOriginXSuffix},null,8,["modelValue","suffix"]),Object(n["createVNode"])(i,{label:"Y",modelValue:e.cardProps.transformOriginY,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.cardProps.transformOriginY=t}),min:0,max:100,suffix:e.transformOriginYSuffix},null,8,["modelValue","suffix"])])])])):Object(n["createCommentVNode"])("",!0),K,Object(n["createVNode"])(s,Object(n["mergeProps"])({class:"draggableListGroup",tag:"transition-group","component-data":{tag:"ul",type:"transition-group",name:e.state.drag?null:"flip-list"},modelValue:e.list,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.list=t})},e.state.dragOptions,{onStart:t[9]||(t[9]=function(t){return e.state.drag=!0}),onEnd:t[10]||(t[10]=function(t){return e.state.drag=!1}),"item-key":"id"}),{item:w((function(t){var r=t.element;return[Object(n["createVNode"])("li",Q,[Object(n["createVNode"])("div",$,[Object(n["createVNode"])(i,{label:e.names[r.key],modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},min:e.ranges[r.key][0],max:e.ranges[r.key][1],suffix:e.units[r.key]},null,8,["label","modelValue","onUpdate:modelValue","min","max","suffix"])])])]})),_:1},16,["component-data","modelValue"])])})),te=r("b76a"),re=r.n(te),ne={class:"SliderComponent"},ce={class:"label"},oe={class:"value"};function ae(e,t,r,c,o,a){var i=Object(n["resolveComponent"])("VueSlider");return Object(n["openBlock"])(),Object(n["createBlock"])("label",ne,[Object(n["createVNode"])("span",ce,Object(n["toDisplayString"])(e.label)+"：",1),Object(n["createVNode"])("span",oe,Object(n["toDisplayString"])(e.value)+Object(n["toDisplayString"])(e.suffix),1),Object(n["createVNode"])("div",{class:"slider",onPointerdown:t[2]||(t[2]=function(){return e.cancelEvent&&e.cancelEvent.apply(e,arguments)}),onPointermove:t[3]||(t[3]=function(){return e.cancelEvent&&e.cancelEvent.apply(e,arguments)})},[Object(n["createVNode"])(i,{min:e.min,max:e.max,interval:e.step,modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t})},null,8,["min","max","interval","modelValue"])],32)])}var ie=r("4971"),se=r.n(ie),ue=(r("3e39"),Object(n["defineComponent"])({props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},label:{type:String,default:""},suffix:{type:String,default:""}},emits:["update:modelValue"],components:{VueSlider:se.a},setup:function(e,t){var r=Object(n["computed"])({get:function(){return e.modelValue},set:function(e){return t.emit("update:modelValue",1*e)}}),c=function(e){e.stopPropagation()};return{value:r,cancelEvent:c}}}));ue.render=ae;var pe=ue,de={x:"移動(X)",y:"移動(Y)",z:"移動(Z)",rx:"回転(X)",ry:"回転(Y)",rz:"回転(Z)"},le={x:[-500,500],y:[-500,500],z:[-500,500],rx:[-360,360],ry:[-360,360],rz:[-360,360]},fe=Object(n["defineComponent"])({components:{draggable:re.a,Slider:pe},props:{transforms:{type:Array,default:function(){return[]}},transformOriginX:{type:Number},transformOriginY:{type:Number},perspective:{type:Number,default:0},preserve:{type:Boolean,default:!1},perspectiveOriginX:{type:Number,default:0},perspectiveOriginY:{type:Number,default:0},offsetCenter:{type:Boolean,default:!0}},emits:["update:transforms","update:transformOriginX","update:transformOriginY","update:perspective","update:preserve","update:perspectiveOriginX","update:perspectiveOriginY","update:offsetCenter"],setup:function(e,t){var r=Object(n["reactive"])({drag:!1,dragOptions:{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}),c=Object(n["computed"])({get:function(){var t;return null!==(t=e.transforms)&&void 0!==t?t:[]},set:function(e){t.emit("update:transforms",e),console.log("update:transforms",e)}}),o=Object(n["reactive"])({perspective:Object(n["computed"])({get:function(){return e.perspective},set:function(e){return t.emit("update:perspective",e)}}),preserve:Object(n["computed"])({get:function(){return e.preserve},set:function(e){return t.emit("update:preserve",e)}}),perspectiveOriginX:Object(n["computed"])({get:function(){return e.perspectiveOriginX},set:function(e){return t.emit("update:perspectiveOriginX",e)}}),perspectiveOriginY:Object(n["computed"])({get:function(){return e.perspectiveOriginY},set:function(e){return t.emit("update:perspectiveOriginY",e)}}),offsetCenter:Object(n["computed"])({get:function(){return e.offsetCenter},set:function(e){return t.emit("update:offsetCenter",e)}})}),a=Object(n["reactive"])({transformOriginX:Object(n["computed"])({get:function(){return e.transformOriginX},set:function(e){return t.emit("update:transformOriginX",e)}}),transformOriginY:Object(n["computed"])({get:function(){return e.transformOriginY},set:function(e){return t.emit("update:transformOriginY",e)}})}),i=Object(n["ref"])(le),s=Object(n["ref"])(de),u=Object(n["ref"])(h),p=function(e,t){return void 0==e?"":0===e?"% = "+(t?"left":"top"):50===e?"% = center":100===e?"% = "+(t?"right":"bottom"):"%"},d=Object(n["computed"])((function(){return p(e.transformOriginX,!0)})),l=Object(n["computed"])((function(){return p(e.transformOriginY,!1)})),f=Object(n["computed"])((function(){return p(e.perspectiveOriginX,!0)})),m=Object(n["computed"])((function(){return p(e.perspectiveOriginY,!1)}));return{state:r,list:c,ranges:i,stageProps:o,cardProps:a,names:s,units:u,transformOriginXSuffix:d,transformOriginYSuffix:l,perspectiveOriginXSuffix:f,perspectiveOriginYSuffix:m}}});r("8b75");fe.render=ee,fe.__scopeId="data-v-703505fa";var me=fe,ve=r("d4ec"),Oe=r("bee2"),be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;Object(ve["a"])(this,e),this.timer=0,this.delayMs=t}return Object(Oe["a"])(e,[{key:"exec",value:function(e){window.clearTimeout(this.timer),this.timer=window.setTimeout(e,this.delayMs)}}]),e}(),ge={cards:[],selected:"",perspective:600,preserve:!0,perspectiveOriginX:50,perspectiveOriginY:45,offsetCenter:!0},je=function(e,t){return Math.round(e+(t-e)*Math.random())},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{id:"card-".concat(Math.ceil(1e6*Math.random())),transforms:[{id:"0",key:"x",value:e?je(-300,200):0},{id:"1",key:"y",value:e?je(-400,200):0},{id:"2",key:"z",value:e?je(-100,100):0},{id:"3",key:"rx",value:e?je(-30,30):0},{id:"4",key:"ry",value:e?je(-30,30):0},{id:"5",key:"rz",value:e?je(-30,30):0}],originX:50,originY:50}},Ve=function(){var e=JSON.parse(JSON.stringify(ge));return e},Ce=function(e){var t=JSON.stringify(e);history.replaceState(void 0,"","#".concat(encodeURIComponent(t)))},xe=function(){var e=window.location.hash.substring(1);try{var t=JSON.parse(decodeURIComponent(e));if(!t)return;var r=Ve();return Object.assign(r,t),t}catch(n){return}},Se=Object(n["defineComponent"])({name:"App",components:{CardStage:P,PropCont:me},setup:function(){var e,t=Object(n["reactive"])(null!==(e=xe())&&void 0!==e?e:Ve()),r=function(){var e=0!==t.cards.length;t.cards.push(ye(e))},c=function(){Object.assign(t,Ve()),r()},o=Object(n["computed"])((function(){var e;return null!==(e=t.cards.find((function(e){return e.id===t.selected})))&&void 0!==e?e:{}})),a=new be(350);return Object(n["watch"])((function(){return t}),(function(){a.exec((function(){return Ce(t)}))}),{deep:!0}),window.addEventListener("hashchange",(function(){console.log("hash changed: load state");var e=xe();Object.assign(t,e)})),t.cards.length||r(),{stageStatus:t,reset:c,addCard:r,selectedCard:o}}});r("b00c");Se.render=s;var Ne=Se;Object(n["createApp"])(Ne).mount("#app")},e140:function(e,t,r){},e72f:function(e,t,r){"use strict";r("c99b")}});
//# sourceMappingURL=app.69979aaa.js.map